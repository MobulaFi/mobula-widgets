{"id":"bkn6","dependencies":[{"name":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\package.json","includedInParent":true,"mtime":1662044502394},{"name":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\package.json","includedInParent":true,"mtime":1661947879685},{"name":"./lib/constants","loc":{"line":10,"column":45},"parent":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\SupabaseClient.js","resolved":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\lib\\constants.js"},{"name":"./lib/helpers","loc":{"line":11,"column":46},"parent":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\SupabaseClient.js","resolved":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\lib\\helpers.js"},{"name":"./lib/SupabaseAuthClient","loc":{"line":12,"column":35},"parent":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\SupabaseClient.js","resolved":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\lib\\SupabaseAuthClient.js"},{"name":"./lib/SupabaseQueryBuilder","loc":{"line":13,"column":37},"parent":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\SupabaseClient.js","resolved":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\lib\\SupabaseQueryBuilder.js"},{"name":"@supabase/storage-js","loc":{"line":14,"column":38},"parent":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\SupabaseClient.js","resolved":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\storage-js\\dist\\module\\index.js"},{"name":"@supabase/functions-js","loc":{"line":15,"column":32},"parent":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\SupabaseClient.js","resolved":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\functions-js\\dist\\module\\index.js"},{"name":"@supabase/postgrest-js","loc":{"line":16,"column":32},"parent":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\SupabaseClient.js","resolved":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\postgrest-js\\dist\\module\\index.js"},{"name":"@supabase/realtime-js","loc":{"line":17,"column":31},"parent":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\supabase-js\\dist\\module\\SupabaseClient.js","resolved":"C:\\Users\\Veeno\\Desktop\\fse\\react-widget\\node_modules\\@supabase\\realtime-js\\dist\\module\\index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"./lib/constants\"),t=require(\"./lib/helpers\"),s=require(\"./lib/SupabaseAuthClient\"),i=require(\"./lib/SupabaseQueryBuilder\"),r=require(\"@supabase/storage-js\"),n=require(\"@supabase/functions-js\"),a=require(\"@supabase/postgrest-js\"),o=require(\"@supabase/realtime-js\"),h=function(e,t,s,i){return new(s||(s=Promise))(function(r,n){function a(e){try{h(i.next(e))}catch(t){n(t)}}function o(e){try{h(i.throw(e))}catch(t){n(t)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(a,o)}h((i=i.apply(e,t||[])).next())})};const u={schema:\"public\",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:e.DEFAULT_HEADERS};class l{constructor(s,i,r){if(this.supabaseUrl=s,this.supabaseKey=i,!s)throw new Error(\"supabaseUrl is required.\");if(!i)throw new Error(\"supabaseKey is required.\");const n=(0,t.stripTrailingSlash)(s),a=Object.assign(Object.assign({},u),r);if(this.restUrl=`${n}/rest/v1`,this.realtimeUrl=`${n}/realtime/v1`.replace(\"http\",\"ws\"),this.authUrl=`${n}/auth/v1`,this.storageUrl=`${n}/storage/v1`,n.match(/(supabase\\.co)|(supabase\\.in)/)){const e=n.split(\".\");this.functionsUrl=`${e[0]}.functions.${e[1]}.${e[2]}`}else this.functionsUrl=`${n}/functions/v1`;this.schema=a.schema,this.multiTab=a.multiTab,this.fetch=a.fetch,this.headers=Object.assign(Object.assign({},e.DEFAULT_HEADERS),null==r?void 0:r.headers),this.shouldThrowOnError=a.shouldThrowOnError||!1,this.auth=this._initSupabaseAuthClient(a),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},a.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get functions(){return new n.FunctionsClient(this.functionsUrl,{headers:this._getAuthHeaders(),customFetch:this.fetch})}get storage(){return new r.SupabaseStorageClient(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){const t=`${this.restUrl}/${e}`;return new i.SupabaseQueryBuilder(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:s=!1,count:i=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:s,count:i})}removeAllSubscriptions(){return h(this,void 0,void 0,function*(){const e=this.getSubscriptions().slice(),t=e.map(e=>this.removeSubscription(e));return(yield Promise.all(t)).map(({error:t},s)=>({data:{subscription:e[s]},error:t}))})}removeSubscription(e){return h(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),s=this.getSubscriptions(),i=s.filter(e=>e.isJoined()).length;return 0===s.length&&(yield this.realtime.disconnect()),{data:{openSubscriptions:i},error:t}})}_closeSubscription(e){return h(this,void 0,void 0,function*(){let t=null;if(!e.isClosed()){const{error:s}=yield this._unsubscribeSubscription(e);t=s}return this.realtime.remove(e),{error:t}})}_unsubscribeSubscription(e){return new Promise(t=>{e.unsubscribe().receive(\"ok\",()=>t({error:null})).receive(\"error\",e=>t({error:e})).receive(\"timeout\",()=>t({error:new Error(\"timed out\")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,localStorage:r,headers:n,fetch:a,cookieOptions:o,multiTab:h}){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new s.SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},n),u),autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,localStorage:r,fetch:a,cookieOptions:o,multiTab:h})}_initRealtimeClient(e){return new o.RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},null==e?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new a.PostgrestClient(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch,throwOnError:this.shouldThrowOnError})}_getAuthHeaders(){var e,t;const s=Object.assign({},this.headers),i=null!==(t=null===(e=this.auth.session())||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey;return s.apikey=this.supabaseKey,s.Authorization=s.Authorization||`Bearer ${i}`,s}_listenForMultiTabEvents(){if(!this.multiTab||!(0,t.isBrowser)()||!(null===window||void 0===window?void 0:window.addEventListener))return null;try{return null===window||void 0===window?void 0:window.addEventListener(\"storage\",t=>{var s,i,r;if(t.key===e.STORAGE_KEY){const e=JSON.parse(String(t.newValue)),n=null!==(i=null===(s=null==e?void 0:e.currentSession)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0,a=null===(r=this.auth.session())||void 0===r?void 0:r.access_token;n?!a&&n?this._handleTokenChanged(\"SIGNED_IN\",n,\"STORAGE\"):a!==n&&this._handleTokenChanged(\"TOKEN_REFRESHED\",n,\"STORAGE\"):this._handleTokenChanged(\"SIGNED_OUT\",n,\"STORAGE\")}})}catch(s){return console.error(\"_listenForMultiTabEvents\",s),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,null==t?void 0:t.access_token,\"CLIENT\")});return e}_handleTokenChanged(e,t,s){\"TOKEN_REFRESHED\"!==e&&\"SIGNED_IN\"!==e||this.changedAccessToken===t?\"SIGNED_OUT\"!==e&&\"USER_DELETED\"!==e||(this.realtime.setAuth(this.supabaseKey),\"STORAGE\"==s&&this.auth.signOut()):(this.realtime.setAuth(t),\"STORAGE\"==s&&this.auth.setAuth(t),this.changedAccessToken=t)}}exports.default=l;"},"sourceMaps":null,"error":null,"hash":"97300f0ae04c5caaf006792e451cd1fb","cacheData":{"env":{}}}